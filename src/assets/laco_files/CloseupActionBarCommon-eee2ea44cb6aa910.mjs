(self.modernJsonp=self.modernJsonp||[]).push([["34777"],{565913(e,n,t){t.r(n),t.d(n,{default:()=>E});var o=t(296540),i=t(278106),a=t(328138),r=t(647130),s=t(36546),l=t(679037),d=t(381681),c=t(609583),p=t(275552),u=t(869344),m=t(528074),h=t(449798),y=t(769228),g=t(622165),C=t(340350),v=t(534955),x=t(221077),f=t(398304),b=t(755701),P=t(532189),w=t(243042),j=t(725719),_=t(502470),A=t(511940),S=t(947814),k=t(474848);let T=(0,S.A)(()=>Promise.all([t.e("91796"),t.e("34851"),t.e("56028"),t.e("10804")]).then(t.bind(t,89670)),void 0,e=>89670,"SaveAffordance",e=>["91796","34851","56028","10804"]),z=(0,S.A)(()=>t.e("30486").then(t.bind(t,329065)),void 0,e=>329065,"PostDownloadUpsellPopover",e=>["30486"]),D=(0,S.A)(()=>Promise.resolve().then(t.bind(t,843884)),void 0,e=>843884,"SecondarySendButtonCommon",e=>[]),B=(0,S.A)(()=>Promise.all([t.e("91796"),t.e("23102")]).then(t.bind(t,664047)),void 0,e=>664047,"ReactionPickerContainer",e=>["91796","23102"]),R=(0,S.A)(()=>t.e("40370").then(t.bind(t,602375)),void 0,e=>602375,"CloseupCommentButton",e=>["40370"]),I=(0,S.A)(()=>t.e("39257").then(t.bind(t,571302)),{ssr:!1},e=>571302,"SharePinHoverContent",e=>["39257"]),L=({ref:e})=>{e.current&&(clearTimeout(e.current),e.current=null)},E=function({goBack:e,gridDescription:n,isDeletedStoryPin:t,isEligibleForAggregatedComments:S,isEligibleForPinReactions:E,isOnSecretBoard:M,onEditSubmit:H,pin:O,viewParameter:W,viewType:F,onSaveButtonClick:K,showRepinOnInitialRender:U,isStoryPin:J,actionBarContainerRef:q,outerPaddingSize:G=P.Z,maxWidth:$,showLeadPin:Q,scrollContainerRef:Z}){let N=(0,i.zy)(),V=(0,f.A)(),X=(0,p.A)(),{checkExperiment:Y}=(0,g.A)(),{showEnabledSaveBehavior:ee}=(0,A.Gn)(!0),{imgSrc:en}=(0,c.M)(),{clientTrackingParams:et,showCloseupContentRight:eo,closeupWithinMasonryEnabled:ei,peekCloseupEnabled:ea}=(0,w._G)(),{viewType:er,viewParameter:es}=(0,u.WQ)(),el=(0,h.A)(),ed=(0,b.Hs)(el,O?.pinner?.id,V),ec=(0,d.A)({showProductDetailPage:!!O.is_eligible_for_pdp}),ep=(0,o.useRef)(null),eu=(0,o.useRef)(null),em=(0,o.useRef)(null),[eh,ey]=(0,o.useState)(!!(0,x.A)(N.search).share),[eg,eC]=(0,o.useState)(!1),[ev,ex]=(0,o.useState)(!1),[ef,eb]=(0,o.useState)(!1),{shareFromPostDownloadUpsell:eP,setShareFromPostDownloadUpsell:ew,saveToBoardFromPostDownloadUpsell:ej,setSaveToBoardFromPostDownloadUpsell:e_}=(0,r.r$)();eP&&(ey(!0),ew(!1));let eA=(0,o.useCallback)(e=>eC(e),[]),eS=(0,o.useCallback)(()=>ey(!1),[]),ek=(0,o.useCallback)(()=>ey(e=>!e),[]),eT=(0,o.useCallback)(()=>{L({ref:ep}),L({ref:eu})},[]),ez=(0,o.useCallback)(()=>{X({event_type:101,component:15565}),eT(),ex(!1),ey(!0)},[eT,X]),eD=(0,o.useCallback)(()=>{eT(),eu.current=setTimeout(()=>{ex(!0)},1e3)},[eT]),eB=(0,o.useCallback)(()=>{eT(),ep.current=setTimeout(()=>{ex(!1),ep.current=null},300)},[eT]),eR=O.board?.owner?.id||O.pinner?.id,{aggregated_pin_data:eI,reaction_counts:eL}=O,{isRTL:eE}=(0,v._8)(),eM=ei?$:$||P.qr,eH=(0,l.A)({pinKey:{type:"Legacy",data:O},orbacActingAs:V,viewer:el}),eO=!!Object.keys(eL||{}).length,eW=eL?(0,C.nc)(eL):0,eF=eI?.did_it_data?.images_count??0,eK=eI?.comment_count??0,eU=em.current&&Y("ce_dweb_pin_rep_preview_on_share_icon_hover").anyEnabled&&!eh&&ev;(0,o.useEffect)(()=>{if(eU){let e=requestAnimationFrame(()=>eb(!0));return()=>cancelAnimationFrame(e)}eb(!1)},[eU]);let eJ=M||t?null:(0,k.jsxs)(m.A,{name:"CloseupActionBar_SecondarySendButton",children:[(0,k.jsx)(D,{anchorRef:em,closeupWithinMasonryEnabled:ei,controllerOptions:{flyoutDisplayOptions:ei?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:eh,loggingOptions:{component:194,element:72,viewParameter:W||es,viewType:F||er,sendShareSurface:8},onFlyoutDismiss:eS,onToggleFlyout:ek,sendObject:{type:"pin",description:n,id:O.id,imageUrl:en,ownerId:eR,url:`/pin/${O.id}/`,clientTrackingParams:et}},experienceAnchor:3025,onMouseEnter:eD,onMouseLeave:eB,shouldHideTooltip:!!eU,showSendAnimation:!0}),eU&&(0,k.jsx)(a.Wd,{zIndex:j.CT,children:(0,k.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{opacity:+!!ef,transition:"opacity 300ms ease-out"}},onMouseEnter:eD,onMouseLeave:eB,children:(0,k.jsx)(a.AM,{anchor:em.current,idealDirection:"down",offset:4,onDismiss:()=>{},size:"flexible",children:(0,k.jsx)(a.Rp,{onTap:ez,children:(0,k.jsx)(m.A,{name:"CloseupActionBar_SharePinHoverContent",children:(0,k.jsx)(I,{pin:O})})})})})})]}),eq=(0,k.jsx)(a.az,{alignItems:"center",color:ei?"transparent":"default","data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:eM,role:"list",rounding:200,children:(0,k.jsxs)(a.so,{alignItems:"stretch",gap:2*!!ei,justifyContent:"start",children:[!ed&&!!E&&(0,k.jsx)(m.A,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,k.jsxs)(a.az,{alignItems:"center",display:"flex",marginEnd:2*!!eO,role:"listitem",children:[(0,k.jsx)(B,{clientTrackingParams:et,handleReactionTrayHover:eA,idealDirection:ei?"down":void 0,pinId:O.id,reactionByMe:O.reaction_by_me,showTooltip:!0,viewParameter:W,viewType:F}),(0,k.jsx)(a.KJ,{dataTestId:"reactions-count",weight:"bold",children:(0,k.jsx)(y.A,{shortform:!0,shortformMaximumFractionDigits:1,value:eW})})]})}),ei&&(0,k.jsx)(R,{isEligibleForAggregatedComments:!!S,pinKey:{type:"Legacy",data:O},scrollContainerRef:Z,totalCommentCount:eK+eF,viewParameter:W,viewType:F}),(0,k.jsx)(a.az,{role:"listitem",children:eJ}),(0,k.jsx)(a.az,{"data-test-id":"closeup-more-options",role:"listitem",children:(0,k.jsx)(s.A,{carouselSlotCurrentIndex:O&&O.carousel_data&&O.carousel_data.index,clientTrackingParams:et,closeupWithinMasonryEnabled:ei,goBack:e,isReactionTrayOpen:eg,onEditSubmit:H,pinKey:{type:"Legacy",data:O},showEditPin:!t&&eH,viewParameter:W,viewType:F})})]})}),eG=ei?void 0:G,e$=(0,k.jsxs)(a.az,{ref:q,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:G/2,paddingRight:eE?void 0:eG,paddingLeft:eE?eG:void 0,paddingBottom:ei?G/2:void 0,borderRadius:J?"0px 32px 32px 32px":eo?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:ei?0:J?-5:0,width:ei?"100%":void 0,children:[(0,k.jsx)(a.az,{"data-test-id":"closeupActionBar",marginStart:ec?-3:void 0,children:(0,k.jsxs)(a.so,{alignItems:"stretch",justifyContent:"between",children:[eq,(0,k.jsx)(a.so,{alignItems:"center",gap:2,children:!t&&!ed&&(0,k.jsx)(a.az,{marginStart:3*!ei,children:(0,k.jsx)(T,{boardCount:el.isAuth?el.boardCount:0,clientTrackingParams:et,onClickCallback:K,pinKey:{type:"Legacy",data:O},saveToBoardFromPostDownloadUpsell:ej,setSaveToBoardFromPostDownloadUpsell:e_,showEnabledSaveBehavior:ee,showRepinOnInitialRender:U,variant:"closeup",viewParameter:W,viewType:F})})})]})}),(0,k.jsx)(z,{})]});if(Q||ei)return e$;let eQ=J&&!ea?_.Ku+4:_.Wk;return ea&&(eQ=0),(0,k.jsx)(a.ib,{top:eQ,zIndex:j.d8,children:e$})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon-eee2ea44cb6aa910.mjs.map